<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Andira do Brasil (Fabaceae) - NOZESia Key</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 3px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
  </style>
</head>
<body class="bg-slate-100 font-sans">
  <div id="app"></div>
  <script>
    const project = {"id":"6f9ojetlr","name":"Andira do Brasil (Fabaceae)","description":"Uma chave de identifica√ß√£o aprimorada para 36 esp√©cies do g√™nero Andira encontradas no Brasil, baseada em caracter√≠sticas morfol√≥gicas vegetativas e reprodutivas chave, otimizada para melhor discrimina√ß√£o.","features":[{"id":"98ggpmp7k","name":"Forma do √Åpice do Fol√≠olo","imageUrl":"https://picsum.photos/seed/Leaflet%20Apex%20Shape/400/300","states":[{"id":"4hh2tsy1k","label":"Acuminado a Agudo"},{"id":"dt7l8fthr","label":"Emarginado a Retuso"},{"id":"c7tojculo","label":"Arredondado a Obtuso"}]},{"id":"huz5x00dk","name":"Indumento da Face Inferior do Fol√≠olo","imageUrl":"https://picsum.photos/seed/Lower%20Leaflet%20Surface%20Indumentum/400/300","states":[{"id":"t58vak8ls","label":"Glabro ou Subglabro"},{"id":"e96eoylat","label":"Pubescente (pilosa)"}]},{"id":"t7197g1u7","name":"N√∫mero de Fol√≠olos por Folha Composta","imageUrl":"https://picsum.photos/seed/Number%20of%20Leaflets%20per%20Compound%20Leaf/400/300","states":[{"id":"dx2ldyfim","label":"5-9 Fol√≠olos"},{"id":"tvrokrc6z","label":"10-15 Fol√≠olos"}]},{"id":"ckppj66tu","name":"Textura da Superf√≠cie do Fruto Maduro","imageUrl":"https://picsum.photos/seed/Mature%20Fruit%20Surface%20Texture/400/300","states":[{"id":"n3n09gjp5","label":"Lisa"},{"id":"or4nul34u","label":"Rugosa ou Verrucosa"}]},{"id":"27jj3afxz","name":"H√°bito da Planta","imageUrl":"https://picsum.photos/seed/Plant%20Habit/400/300","states":[{"id":"nscjke51r","label":"√Årvore"},{"id":"5hodg915h","label":"Arbusto ou Subarbusto"}]},{"id":"krerj7num","name":"Consist√™ncia dos Fol√≠olos","imageUrl":"https://picsum.photos/seed/Leaflet%20Consistency/400/300","states":[{"id":"7zmb4qm1d","label":"Cart√°cea"},{"id":"ewcucydm7","label":"Cori√°cea"}]},{"id":"tjmkfp8es","name":"Nervuras da Face Inferior dos Fol√≠olos","imageUrl":"https://picsum.photos/seed/Lower%20Leaflet%20Veins/400/300","states":[{"id":"959qp7g2u","label":"Salientes"},{"id":"xkt08s7h4","label":"Imersas ou Planas"}]},{"id":"dmhz4zpsr","name":"Cor da Flor","imageUrl":"https://picsum.photos/seed/Cor%20da%20Flor/400/300","states":[{"id":"eklq0d4i9","label":"Roxa a Lil√°s"},{"id":"c6a3ie715","label":"Rosa a Rosada"},{"id":"zs24me0h0","label":"Branca a Creme"},{"id":"aae1f8tf2","label":"Amarela"}]},{"id":"ej3zbuaa0","name":"Caracter√≠sticas da Est√≠pula","imageUrl":"https://picsum.photos/seed/Caracteristicas%20da%20Estipula/400/300","states":[{"id":"wmpczjjn1","label":"Ausente ou Caduca e Inconsp√≠cua (<1mm)"},{"id":"h22tlw2j3","label":"Pequena (1-5mm) e Dec√≠dua"},{"id":"0kld7vlki","label":"M√©dia (5-15mm) e Dec√≠dua"},{"id":"zkzncynsm","label":"Grande (>15mm) e Dec√≠dua"},{"id":"nqlvv9pkl","label":"Pequena (1-5mm) e Persistente"},{"id":"p6uor31b0","label":"M√©dia (5-15mm) e Persistente"},{"id":"9owkh7ni8","label":"Grande (>15mm) e Persistente"}]},{"id":"4a6rd2son","name":"Forma da Infloresc√™ncia","imageUrl":"https://picsum.photos/seed/Forma%20da%20Inflorescencia/400/300","states":[{"id":"hfshhnoqi","label":"Paniculada Terminal"},{"id":"i2e92u2ik","label":"Racemosa Axilar ou Terminal"}]},{"id":"bn5yucjhj","name":"Indumento do Ramo Jovem","imageUrl":"https://picsum.photos/seed/Indumento%20do%20Ramo%20Jovem/400/300","states":[{"id":"dboxoudz7","label":"Glabro ou Quase Glabro"},{"id":"elgjyp240","label":"Pubescente"},{"id":"oimlhaavn","label":"Densa e Velutina"}]}],"entities":[{"id":"9kjrjpve0","name":"Andira fraxinifolia Benth.","scientificName":"Andira fraxinifolia Benth.","description":"√Årvore de porte m√©dio a grande, proeminente na Mata Atl√¢ntica e Cerrado. Caracterizada por fol√≠olos cart√°ceos, frequentemente acuminados, nervuras salientes e flores roxas a lil√°s. Ramos jovens geralmente glabros e est√≠pulas pequenas e dec√≠duas.","imageUrl":"https://floradigital.ufsc.br/imagens/17046d486bd2f60188f46138a84d21e912d3.jpg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"ax26og9at","name":"Andira inermis (W.Wright) Kunth ex DC.","scientificName":"Andira inermis (W.Wright) Kunth ex DC.","description":"√Årvore amplamente distribu√≠da na Am√©rica tropical. Possui fol√≠olos tipicamente acuminados a agudos, glabros e cart√°ceos, com nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Produz frutos lisos.","imageUrl":"https://fm-digital-assets.fieldmuseum.org/1508/367/FABA_andi_in_pan_26378.jpg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"7svumjnmh","name":"Andira humilis Mart. ex Benth.","scientificName":"Andira humilis Mart. ex Benth.","description":"Pequeno arbusto ou subarbusto end√™mico do Cerrado brasileiro. Caracterizado por fol√≠olos cart√°ceos com √°pice arredondado e superf√≠cies inferiores pubescentes, com nervuras imersas. Flores roxas a lil√°s, infloresc√™ncias racemosas axilares e ramos jovens pubescentes. Frutos lisos.","imageUrl":"https://static.inaturalist.org/photos/30181468/large.jpeg","links":[],"traits":{"98ggpmp7k":["c7tojculo"],"huz5x00dk":["e96eoylat"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["5hodg915h"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["xkt08s7h4"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["wmpczjjn1"],"4a6rd2son":["i2e92u2ik"],"bn5yucjhj":["elgjyp240"]}},{"id":"1gqbkeegv","name":"Andira surinamensis (Bondt) Splitg. ex Amshoff","scientificName":"Andira surinamensis (Bondt) Splitg. ex Amshoff","description":"√Årvore robusta da Amaz√¥nia e Escudo Guianense. Identificada por seus fol√≠olos cori√°ceos e acuminados, superf√≠cies glabras e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos grandes e distintamente rugosos.","imageUrl":"https://novamata.org/wp-content/uploads/2020/08/800px-Andira_fraxinifolia_Benth._5808133574-1.jpg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["or4nul34u"],"27jj3afxz":["nscjke51r"],"krerj7num":["ewcucydm7"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"s98mpxnqz","name":"Andira anthelmia (Vell.) Benth.","scientificName":"Andira anthelmia (Vell.) Benth.","description":"√Årvore da Mata Atl√¢ntica e Cerrado, conhecida por suas propriedades medicinais. Possui fol√≠olos cart√°ceos e acuminados, com superf√≠cie inferior pubescente e nervuras salientes. Flores rosa a rosada, infloresc√™ncia paniculada terminal e ramos jovens pubescentes. Frutos lisos.","imageUrl":"https://floradigital.ufsc.br/imagens/3969a68f0db8d6ac807a5012cfab5dafd3cc.JPG","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["e96eoylat"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["c6a3ie715"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["elgjyp240"]}},{"id":"rwauf3n0v","name":"Andira coriacea Pulle","scientificName":"Andira coriacea Pulle","description":"√Årvore amaz√¥nica caracterizada por fol√≠olos cori√°ceos, com √°pice arredondado a obtuso e superf√≠cies geralmente glabras, com nervuras imersas. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos lisos.","imageUrl":"https://bs.plantnet.org/image/o/ac1c3431f38a16b32a2b93b4eca59245ad418958","links":[],"traits":{"98ggpmp7k":["c7tojculo"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["ewcucydm7"],"tjmkfp8es":["xkt08s7h4"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"rh8f5jho9","name":"Andira legalis (Vell.) Toledo","scientificName":"Andira legalis (Vell.) Toledo","description":"√Årvore da Mata Atl√¢ntica brasileira, com fol√≠olos cori√°ceos e √°pices arredondados, superf√≠cie inferior glabra e nervuras imersas. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos lisos.","imageUrl":"https://imagemcampo.jbrj.gov.br/producao/imagens_de_campo/302922773.jpg","links":[],"traits":{"98ggpmp7k":["c7tojculo"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["ewcucydm7"],"tjmkfp8es":["xkt08s7h4"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"lj511awgh","name":"Andira marauensis N.F.O.Mota & A.M.G.Azevedo","scientificName":"Andira marauensis N.F.O.Mota & A.M.G.Azevedo","description":"Esp√©cie recentemente descrita da Mata Atl√¢ntica. Caracterizada por fol√≠olos cart√°ceos emarginados, superf√≠cie inferior glabra e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos lisos.","imageUrl":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcymyEQH6NGABrVQ59uG9ApBv3XZSANoaC8w&s","links":[],"traits":{"98ggpmp7k":["dt7l8fthr"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"u2nebdaoc","name":"Andira micrantha Ducke","scientificName":"Andira micrantha Ducke","description":"√Årvore do bioma Amaz√¥nico, conhecida por suas flores pequenas. Possui fol√≠olos cart√°ceos acuminados, superf√≠cies glabras e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos lisos.","imageUrl":"https://bs.plantnet.org/image/o/694c5b216dbe0190e2c903107365002f0f26ec09","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"vq77isgqm","name":"Andira nitida Mart. ex Benth.","scientificName":"Andira nitida Mart. ex Benth.","description":"√Årvore de v√°rios ecossistemas brasileiros, notada por seus fol√≠olos brilhantes, frequentemente arredondados e cori√°ceos, com superf√≠cies inferiores pubescentes e nervuras imersas. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens pubescentes. Frutos lisos.","imageUrl":"https://inaturalist-open-data.s3.amazonaws.com/photos/31547898/original.jpg","links":[],"traits":{"98ggpmp7k":["c7tojculo"],"huz5x00dk":["e96eoylat"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["ewcucydm7"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["elgjyp240"]}},{"id":"9zirt9cp2","name":"Andira ormosioides Benth.","scientificName":"Andira ormosioides Benth.","description":"√Årvore do Cerrado e Mata Atl√¢ntica. Caracterizada por fol√≠olos cart√°ceos acuminados, com superf√≠cie inferior pubescente e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens pubescentes. Frutos rugosos.","imageUrl":"https://fm-digital-assets.fieldmuseum.org/979/951/FABA_andi_ormo_2193366.jpg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["e96eoylat"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["or4nul34u"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["elgjyp240"]}},{"id":"jejvxihmq","name":"Andira parviflora Ducke","scientificName":"Andira parviflora Ducke","description":"√Årvore das regi√µes amaz√¥nicas, com flores menores. Possui fol√≠olos cart√°ceos emarginados, superf√≠cies tipicamente glabras e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos lisos.","imageUrl":"https://fm-digital-assets.fieldmuseum.org/979/954/FABA_andi_parv_659856.jpg","links":[],"traits":{"98ggpmp7k":["dt7l8fthr"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"tjmkfp8es":["959qp7g2u"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"2umv0fwyj","name":"Andira vermifuga (Mart.) Benth.","scientificName":"Andira vermifuga (Mart.) Benth.","description":"√Årvore do Cerrado, conhecida por suas propriedades verm√≠fugas. Tipicamente possui fol√≠olos cart√°ceos arredondados ou obtusos, superf√≠cie inferior glabra e nervuras imersas. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos lisos.","imageUrl":"https://inaturalist-open-data.s3.amazonaws.com/photos/47894857/original.jpeg","links":[],"traits":{"98ggpmp7k":["c7tojculo"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"7qb49svuf","name":"Andira cordata N.F.O.Mota & A.M.G.Azevedo","scientificName":"Andira cordata N.F.O.Mota & A.M.G.Azevedo","description":"√Årvore da Mata Atl√¢ntica caracterizada por bases dos fol√≠olos cordadas, √°pice tipicamente acuminado e fol√≠olos cart√°ceos glabros com nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frequentemente encontrada com frutos lisos.","imageUrl":"https://www.arvoresdobiomacerrado.com.br/site/wp-content/uploads/2017/07/3-23.jpg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"msbolyalb","name":"Andira cujabensis Benth.","scientificName":"Andira cujabensis Benth.","description":"√Årvore do Pantanal e Cerrado, frequentemente reconhecida por frutos maiores e rugosos. Possui folhagem cori√°cea e glabra, com fol√≠olos acuminados e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros.","imageUrl":"https://www.arvoresdobiomacerrado.com.br/site/wp-content/uploads/2017/07/3-24.jpg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["or4nul34u"],"27jj3afxz":["nscjke51r"],"krerj7num":["ewcucydm7"],"dmhz4zpsr":["zs24me0h0"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}},{"id":"n5xct85mw","name":"Andira galeottiana Standl.","scientificName":"Andira galeottiana Standl.","description":"√Årvore amplamente distribu√≠da na Am√©rica Central e do Sul, presente em partes da Amaz√¥nia brasileira. Possui fol√≠olos cart√°ceos acuminados, indumento variado (geralmente pubescente) na face inferior e nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens pubescentes. Frutos lisos.","imageUrl":"https://inaturalist-open-data.s3.amazonaws.com/photos/12284047/original.jpeg","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["e96eoylat"],"t7197g1u7":["dx2ldyfim"],"ckppj66tu":["n3n09gjp5"],"27jj3afxz":["nscjke51r"],"krerj7num":["7zmb4qm1d"],"dmhz4zpsr":["eklq0d4i9"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["elgjyp240"]}},{"id":"tzxu1532z","name":"Andira macrothyrsa Ducke","scientificName":"Andira macrothyrsa Ducke","description":"√Årvore amaz√¥nica caracterizada por grandes infloresc√™ncias tirsoides. Possui fol√≠olos cori√°ceos acuminados e glabros, com nervuras salientes. Flores roxas a lil√°s, infloresc√™ncia paniculada terminal e ramos jovens glabros. Frutos frequentemente rugosos.","imageUrl":"https://fm-digital-assets.fieldmuseum.org/1653/322/BURSE_LT0163C1.JPG","links":[],"traits":{"98ggpmp7k":["4hh2tsy1k"],"huz5x00dk":["t58vak8ls"],"t7197g1u7":["tvrokrc6z"],"ckppj66tu":["or4nul34u"],"27jj3afxz":["nscjke51r"],"krerj7num":["ewcucydm7"],"dmhz4zpsr":["aae1f8tf2"],"ej3zbuaa0":["h22tlw2j3"],"4a6rd2son":["hfshhnoqi"],"bn5yucjhj":["dboxoudz7"]}}]};
    const lang = "pt";
    const t = {
      en: {
        features: "Features", selected: "selected", matches: "Matches", discarded: "Discarded",
        restart: "Restart", noMatches: "No matches found.", tryUnselecting: "Try unselecting some features.",
        potential: "potential matches", identified: "1 Entity identified", close: "Close",
        speciesDetails: "Species Details", morphology: "Morphology & Traits", resources: "Resources",
        createdWith: "Created with NOZESia", viewResults: "View Results", excluded: "Excluded by selection"
      },
      pt: {
        features: "Caracter√≠sticas", selected: "selecionado(s)", matches: "Compat√≠veis", discarded: "Descartados",
        restart: "Reiniciar", noMatches: "Nenhum resultado.", tryUnselecting: "Tente remover sele√ß√µes.",
        potential: "matches potenciais", identified: "1 Entidade identificada", close: "Fechar",
        speciesDetails: "Detalhes da Esp√©cie", morphology: "Morfologia & Caracter√≠sticas", resources: "Recursos Adicionais",
        createdWith: "Criado com NOZESia", viewResults: "Ver Resultados", excluded: "Exclu√≠do pela sele√ß√£o"
      }
    };
    const strings = t[lang];
    
    let selections = {};
    let showDiscarded = false;
    let viewingEntity = null;
    let mobileTab = 'FILTERS';
    
    function toggleSelection(featureId, stateId) {
      if (!selections[featureId]) selections[featureId] = [];
      const idx = selections[featureId].indexOf(stateId);
      if (idx >= 0) {
        selections[featureId].splice(idx, 1);
        if (selections[featureId].length === 0) delete selections[featureId];
      } else {
        selections[featureId].push(stateId);
      }
      render();
    }
    
    function resetKey() { selections = {}; render(); }
    function setMobileTab(tab) { mobileTab = tab; render(); }
    function toggleDiscarded() { showDiscarded = !showDiscarded; render(); }
    function viewEntity(entity) { viewingEntity = entity; render(); }
    function closeEntity() { viewingEntity = null; render(); }
    
    function getFilteredEntities() {
      const remaining = [], discarded = [];
      project.entities.forEach(entity => {
        let isMatch = true;
        for (const [fid, sids] of Object.entries(selections)) {
          const entityStates = entity.traits[fid] || [];
          if (!sids.some(id => entityStates.includes(id))) { isMatch = false; break; }
        }
        if (isMatch) remaining.push(entity); else discarded.push(entity);
      });
      return { remaining, discarded };
    }
    
    function getTotalSelections() {
      return Object.values(selections).reduce((a, c) => a + c.length, 0);
    }
    
    function render() {
      const { remaining, discarded } = getFilteredEntities();
      const totalSel = getTotalSelections();
      
      let entityModalHTML = '';
      if (viewingEntity) {
        const e = viewingEntity;
        const traitsHTML = project.features.map(f => {
          const stateIds = e.traits[f.id] || [];
          const stateLabels = stateIds.map(sid => f.states.find(s => s.id === sid)?.label).filter(Boolean).join(', ');
          return stateLabels ? `<div class="flex justify-between py-2 border-b border-slate-100"><span class="text-slate-500">${f.name}</span><span class="font-medium text-slate-800">${stateLabels}</span></div>` : '';
        }).join('');
        const linksHTML = e.links && e.links.length > 0 ? `<div class="mt-6"><h4 class="font-semibold text-slate-700 mb-3">${strings.resources}</h4><div class="space-y-2">${e.links.map(l => `<a href="${l.url}" target="_blank" class="flex items-center gap-2 text-emerald-600 hover:underline text-sm"><span>üîó</span>${l.label}</a>`).join('')}</div></div>` : '';
        entityModalHTML = `
          <div class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4" onclick="if(event.target===this)closeEntity()">
            <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col">
              <div class="relative h-48 sm:h-64 bg-slate-200 shrink-0">
                ${e.imageUrl ? `<img src="${e.imageUrl}" class="w-full h-full object-cover" onerror="this.style.display='none'">` : '<div class="w-full h-full flex items-center justify-center text-slate-400 text-6xl">üåø</div>'}
                <button onclick="closeEntity()" class="absolute top-3 right-3 bg-black/40 hover:bg-black/60 text-white rounded-full p-2">‚úï</button>
              </div>
              <div class="p-6 overflow-y-auto custom-scrollbar">
                <h2 class="text-2xl font-bold text-slate-800 mb-1">${e.name}</h2>
                ${e.description ? `<p class="text-slate-600 mb-4">${e.description}</p>` : ''}
                <div class="mt-4"><h4 class="font-semibold text-slate-700 mb-2">${strings.morphology}</h4><div class="text-sm">${traitsHTML}</div></div>
                ${linksHTML}
              </div>
            </div>
          </div>
        `;
      }
      
      const featuresHTML = project.features.map(f => {
        const selStates = selections[f.id] || [];
        return `
          <div class="bg-slate-50 rounded-xl p-4">
            <h4 class="font-semibold text-slate-700 mb-3 flex items-center gap-2">
              ${f.imageUrl ? `<img src="${f.imageUrl}" class="w-6 h-6 rounded object-cover">` : ''}
              ${f.name}
              ${selStates.length > 0 ? `<span class="ml-auto text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full">${selStates.length}</span>` : ''}
            </h4>
            <div class="flex flex-wrap gap-2">
              ${f.states.map(s => {
                const isSel = selStates.includes(s.id);
                return `<button onclick="toggleSelection('${f.id}','${s.id}')" class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${isSel ? 'bg-emerald-600 text-white shadow-md' : 'bg-white text-slate-600 hover:bg-slate-100 border border-slate-200'}">${s.label}</button>`;
              }).join('')}
            </div>
          </div>
        `;
      }).join('');
      
      const entityCard = (e, isDiscarded = false) => `
        <div onclick="viewEntity(project.entities.find(x=>x.id==='${e.id}'))" class="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all cursor-pointer overflow-hidden border ${isDiscarded ? 'border-red-200 opacity-60' : 'border-slate-200 hover:border-emerald-300'}">
          <div class="h-32 bg-slate-100 relative">
            ${e.imageUrl ? `<img src="${e.imageUrl}" class="w-full h-full object-cover" onerror="this.parentElement.innerHTML='<div class=\\'w-full h-full flex items-center justify-center text-slate-300 text-4xl\\'>üåø</div>'">` : '<div class="w-full h-full flex items-center justify-center text-slate-300 text-4xl">üåø</div>'}
            ${isDiscarded ? '<div class="absolute inset-0 bg-red-500/20 flex items-center justify-center"><span class="bg-red-500 text-white text-xs px-2 py-1 rounded">‚úï</span></div>' : ''}
          </div>
          <div class="p-3">
            <h4 class="font-semibold text-slate-800 text-sm truncate">${e.name}</h4>
            ${e.description ? `<p class="text-xs text-slate-500 mt-1 line-clamp-2">${e.description}</p>` : ''}
          </div>
        </div>
      `;
      
      const remainingHTML = remaining.length > 0 
        ? remaining.map(e => entityCard(e)).join('')
        : `<div class="col-span-full text-center py-12 text-slate-500"><div class="text-4xl mb-3">üîç</div><p class="font-medium">${strings.noMatches}</p><p class="text-sm">${strings.tryUnselecting}</p></div>`;
      
      const discardedHTML = discarded.length > 0 && showDiscarded
        ? `<div class="mt-6 pt-6 border-t"><h4 class="font-semibold text-slate-500 mb-4 flex items-center gap-2">‚ùå ${strings.discarded} (${discarded.length})</h4><div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3">${discarded.map(e => entityCard(e, true)).join('')}</div></div>`
        : '';
      
      document.getElementById('app').innerHTML = `
        <div class="min-h-screen flex flex-col">
          <header class="bg-white border-b px-4 py-3 flex justify-between items-center shadow-sm">
            <div class="flex items-center gap-3">
              <span class="bg-emerald-600 text-white text-xs px-2 py-1 rounded font-bold">KEY</span>
              <h1 class="text-lg font-bold text-slate-800 truncate">${project.name}</h1>
            </div>
            <button onclick="resetKey()" class="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-lg">üîÑ ${strings.restart}</button>
          </header>
          
          <div class="md:hidden flex border-b bg-white">
            <button onclick="setMobileTab('FILTERS')" class="flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 ${mobileTab==='FILTERS'?'text-emerald-600 border-b-2 border-emerald-600':'text-slate-500 bg-slate-50'}">
              üîç ${strings.features} ${totalSel>0?`<span class="bg-emerald-600 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">${totalSel}</span>`:''}
            </button>
            <button onclick="setMobileTab('RESULTS')" class="flex-1 py-3 text-sm font-bold flex items-center justify-center gap-2 ${mobileTab==='RESULTS'?'text-emerald-600 border-b-2 border-emerald-600':'text-slate-500 bg-slate-50'}">
              üìã ${strings.matches} <span class="bg-slate-200 text-slate-700 text-xs px-1.5 py-0.5 rounded-full">${remaining.length}</span>
            </button>
          </div>
          
          <div class="flex-1 flex flex-col md:flex-row overflow-hidden">
            <div class="w-full md:w-1/3 lg:w-1/4 bg-white md:border-r flex-col h-full ${mobileTab==='FILTERS'?'flex':'hidden md:flex'}">
              <div class="hidden md:block p-4 border-b bg-slate-50">
                <h3 class="font-semibold text-slate-700 flex items-center gap-2">üîç ${strings.features}</h3>
              </div>
              <div class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar">${featuresHTML}</div>
            </div>
            
            <div class="flex-1 flex flex-col h-full ${mobileTab==='RESULTS'?'flex':'hidden md:flex'}">
              <div class="p-4 border-b bg-slate-50 flex justify-between items-center">
                <div>
                  <span class="font-semibold text-slate-700">${remaining.length === 1 ? strings.identified : remaining.length + ' ' + strings.potential}</span>
                </div>
                ${discarded.length > 0 ? `<button onclick="toggleDiscarded()" class="text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1">${showDiscarded?'üîº':'üîΩ'} ${strings.discarded} (${discarded.length})</button>` : ''}
              </div>
              <div class="flex-1 overflow-y-auto p-4 custom-scrollbar">
                <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3">${remainingHTML}</div>
                ${discardedHTML}
              </div>
            </div>
          </div>
          
          <footer class="bg-white border-t px-4 py-2 text-center text-xs text-slate-400">
            ${strings.createdWith} ‚Ä¢ <a href="https://djhandoom.github.io/nozes/" target="_blank" class="text-emerald-600 hover:underline">djhandoom.github.io/nozes</a>
          </footer>
        </div>
        ${entityModalHTML}
      `;
    }
    
    render();
  </script>
</body>
</html>